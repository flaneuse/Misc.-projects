breaks = c(1995, 2016, by = 10)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid()
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName)) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid()
rect = data.frame(xmin = rep(1995,3), xmax = rep(2016,3),
ymin = c(0, 20, 40),
ymax = c(20, 40, 60),
fill = c(pal[5], pal[4], pal[3]))
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName)) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.major.x = element_line(colour = grey60K, size = 0.1))
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName)) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor = element_line(colour = grey60K, size = 0.1))
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName)) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1))
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName)) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'))
# geographic variation ----------------------------------------------------
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName),
colour = grey90K) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data,
colour = grey90K) +
geom_text(aes(x = SurveyYear, y = Value,
label = paste0(round(Value), '%'),
group = CountryName),
family = 'Lato Light',
size = 4, colour = grey90K, nudge_y = 5) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
ylab('percent of stunted children under 5') +
annotate(label = 'Source: Demographic and Health Surveys',
family = 'Lato Light', size = 2.5,
x = 0.9, y = 0.1) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'))
# geographic variation ----------------------------------------------------
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName),
colour = grey90K) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data,
colour = grey90K) +
geom_text(aes(x = SurveyYear, y = Value,
label = paste0(round(Value), '%'),
group = CountryName),
family = 'Lato Light',
size = 4, colour = grey90K, nudge_y = 5) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
ylab('percent of stunted children under 5') +
annotate(label = 'Source: Demographic and Health Surveys',
geom = 'text',
family = 'Lato Light', size = 2.5,
x = 0.9, y = 0.1) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'))
# geographic variation ----------------------------------------------------
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName),
colour = grey90K) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data,
colour = grey90K) +
geom_text(aes(x = SurveyYear, y = Value,
label = paste0(round(Value), '%'),
group = CountryName),
family = 'Lato Light',
data = recent_data,
size = 4, colour = grey90K, nudge_y = 10) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
ylab('percent of stunted children under 5') +
annotate(label = 'Source: Demographic and Health Surveys',
geom = 'text',
family = 'Lato Light', size = 12.5,
x = 0.9, y = 0.1) +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'))
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName),
colour = grey90K) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data,
colour = grey90K) +
geom_text(aes(x = SurveyYear, y = Value,
label = paste0(round(Value), '%'),
group = CountryName),
family = 'Lato Light',
data = recent_data,
size = 4, colour = grey90K, nudge_y = 10) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
ggtitle('Percent of stunted children under 5 in FTF countries',
subtitle = 'Source: Demographic and Health Surveys') +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'))
# geographic variation ----------------------------------------------------
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName),
colour = grey90K) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data,
colour = grey90K) +
geom_text(aes(x = SurveyYear, y = Value,
label = paste0(round(Value), '%'),
group = CountryName),
family = 'Lato Light',
data = recent_data,
size = 4, colour = grey90K, nudge_y = 10) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
ggtitle('Percent of stunted children under 5 in FTF countries',
subtitle = 'Source: Demographic and Health Surveys') +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'),
plot.subtitle = element_text(family = 'Lato Light', size = 14))
glimpst(stunting)
glimpse(stunting)
ggplot(stunting) +
geom_tile(aes(x = CharacteristicLabel, y = CountryName, fill = Value)) +
scale_fill_gradientn(colours = pal[1:5])
ggplot(stunting) +
geom_tile(aes(x = CharacteristicLabel, y = CountryName, fill = Value)) +
facet_wrap(~CountryName, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5]))
recent_sub = left_join(recent_year, stunting) %>%
arrange(desc(Value))
recent_sub
ggplot(stunting) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value),
y = CountryName, fill = Value)) +
facet_wrap(~CountryName, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab()
ggplot(stunting) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value),
y = CountryName, fill = Value)) +
facet_wrap(~CountryName, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5]))
recent_sub = left_join(recent_year, stunting) %>%
arrange(desc(Value)) %>%
mutate(country = paste0(CountryName, ' (', SurveyYear, ')'))
ggplot(stunting) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value),
y = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab()
glimpse(recent_sub)
ggplot(recent_sub) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value),
y = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab()
recent_sub$CountryName = factor(recent_sub$CountryName, levels = recent_data$CountryName)
ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
x = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab() +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 10),
strip.text = element_text(size = 12)
)
ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
x = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
coord_flip() +
theme_xylab() +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 10),
strip.text = element_text(size = 12)
)
ggplot(recent_sub) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
y = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab() +
theme(axis.text.y = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.x = element_text(size = 7),
strip.text = element_text(size = 12)
)
1+2
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
y = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.85, 0.1)) +
theme(axis.text.y = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.x = element_text(size = 7),
strip.text = element_text(size = 12)
)
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
y = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.85, 0.1)) +
theme(axis.text.y = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.x = element_text(size = 7),
strip.text = element_text(size = 12)
)
ggplot(recent_sub) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
y = 1, fill = Value)) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.85, 0.1)) +
theme(axis.text.y = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.x = element_text(size = 7),
strip.text = element_text(size = 12)
)
recent_sub = left_join(recent_year, stunting) %>%
arrange(desc(Value)) %>%
mutate(country = paste0(CountryName, ' (', SurveyYear, ')'))
# refactor ----------------------------------------------------------------
# reorder, based on highest nat'l stunting in most recent year.
stunting$CountryName = factor(stunting$CountryName, levels = recent_data$CountryName)
natl$CountryName = factor(natl$CountryName, levels = recent_data$CountryName)
recent_data$CountryName = factor(recent_data$CountryName, levels = recent_data$CountryName)
recent_sub$CountryName = factor(recent_sub$CountryName, levels = recent_data$CountryName)
p = ggplot(recent_sub) +
geom_tile(aes(x = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
y = 1, fill = Value),
colour = 'white') +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1)) +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.y = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.x = element_text(size = 7, angle = 45),
strip.text = element_text(size = 12)
)
p
p = ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=TRUE),
x = 1, fill = Value),
colour = 'white') +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1)) +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 7),
strip.text = element_text(size = 12)
)
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_subnatl_stuntingDHS', saveBoth = TRUE, width = 10, height = 10)
p = ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=FALSE),
x = 1, fill = Value),
colour = 'white') +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1)) +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 7),
strip.text = element_text(size = 9)
)
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_subnatl_stuntingDHS', saveBoth = TRUE,
width = 7.5, height = 10)
p = ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=FALSE),
x = 1, fill = Value),
colour = 'white', size = 0.25) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1)) +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 7),
strip.text = element_text(size = 9)
)
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_subnatl_stuntingDHS', saveBoth = TRUE,
width = 10, height = 10)
ggplot(natl) +
geom_line(aes(x = SurveyYear, y = Value, group = CountryName),
colour = grey90K) +
geom_point(aes(x = SurveyYear, y = Value, group = CountryName),
size = 2, data = recent_data,
colour = grey90K) +
geom_text(aes(x = SurveyYear, y = Value,
label = paste0(round(Value), '%'),
group = CountryName),
family = 'Lato Light',
data = recent_data,
size = 4, colour = grey90K, nudge_y = 10) +
geom_rect(aes(xmin=xmin, xmax=xmax,
ymin=ymin,ymax=ymax,
fill = fill),
data = rect,
alpha = alpha_bg) +
facet_wrap(~CountryName) +
ggtitle('Percent of stunted children under 5 in FTF countries',
subtitle = 'Source: Demographic and Health Surveys') +
scale_fill_identity() +
scale_x_continuous(limits = c(1995, 2016),
breaks = seq(1995, 2016, by = 10),
minor_breaks = seq(1995, 2016, by = 5)) +
scale_y_continuous(breaks = seq(0, 60, by = 20), limits = c(0, 62)) +
theme_xygrid() +
theme(panel.grid.minor.x = element_line(colour = grey60K, size = 0.1),
panel.spacing = unit(1, 'lines'),
plot.subtitle = element_text(family = 'Lato Light', size = 12))
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_natl_stuntingDHS', saveBoth = TRUE,
width = 10, height = 10)
# geographic variation ----------------------------------------------------
p = ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=FALSE),
x = 1, fill = Value),
colour = 'white', size = 0.25) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1)) +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 7),
strip.text = element_text(size = 9)
)
levels(recent_sub$CountryName)
recent_data = left_join(recent_year, natl) %>%
arrange(desc(Value)) %>%
mutate(country = paste0(CountryName, ' (', SurveyYear, ')'))
recent_data = left_join(recent_year, natl) %>%
arrange(desc(Value)) %>%
mutate(country = paste0(CountryName, ' (', SurveyYear, ')'))
recent_sub = left_join(recent_year, stunting) %>%
arrange(desc(Value)) %>%
mutate(country = paste0(CountryName, ' (', SurveyYear, ')'))
recent_sub$country = factor(recent_sub$country, levels = recent_data$country)
p = ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=FALSE),
x = 1, fill = Value),
colour = 'white', size = 0.25) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1)) +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 7),
strip.text = element_text(size = 9)
)
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_subnatl_stuntingDHS', saveBoth = TRUE,
width = 10, height = 10)
p = ggplot(recent_sub) +
geom_tile(aes(y = forcats::fct_reorder(CharacteristicLabel, Value, .desc=FALSE),
x = 1, fill = Value),
colour = 'white', size = 0.25) +
facet_wrap(~country, scales = 'free') +
scale_fill_gradientn(colours = rev(pal[1:5])) +
theme_xylab(legend.position = c(0.9, 0.1),
legend.direction = 'vertical') +
ggtitle('Percent of stunted children under 5 within FTF countries, with most recent data',
subtitle = 'Source: Demographic and Health Surveys') +
theme(axis.text.x = element_blank(),
panel.spacing = unit(1, 'lines'),
axis.text.y = element_text(size = 7),
strip.text = element_text(size = 9)
)
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_subnatl_stuntingDHS', saveBoth = TRUE,
width = 10, height = 10)
save_plot('~/Creative Cloud Files/MAV/Projects/FTF/FTF_subnatl_stuntingDHS', saveBoth = TRUE,
width = 14, height = 10)
